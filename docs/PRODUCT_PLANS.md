# 双层 Staking 产品方案

## 一. 产品概览

本方案基于 Whale Staking 合约架构，提供两套独立的产品方案，分别面向不同用户群体：

- **普通 Staking（委托质押）**：面向普通用户，低门槛、稳健收益
- **Premium Staking（高级质押）**：面向大户/机构，高门槛、高收益

---

## 二. 产品一：普通 Staking（委托质押）

### 产品定位
面向普通用户的委托质押产品，降低参与门槛，提供稳定的质押收益。

### 目标用户
- 普通散户投资者
- 小额持有者
- 希望获得稳定收益的用户

### 核心参数

| 参数项 | 配置值 | 说明 |
|--------|--------|------|
| **最小质押门槛** | 1 HSK | 用户每次质押的最低金额 |
| **年化收益率** | 8% | 固定年化收益率（部署时配置） |
| **锁定期** | 365天 | 固定365天锁定期 |
| **白名单模式** | 关闭 | 所有用户均可自由参与质押 |
| **最大总质押量** | 10,000,000 HSK | 整个产品池的上限（所有用户质押金额总和的上限，非单笔限制） |

### 产品机制

#### 1. 参与机制
- **开放参与**：无需审核，任何用户都可以参与质押
- **质押时间窗口**：只能在指定的时间窗口内进行质押（由管理员设置开始时间和结束时间）
- **固定锁定期**：锁定期固定为 365天（不需要选择）
- **多次质押**：同一用户可以进行多次质押，创建多个质押位置

#### 2. 收益机制
- **固定年化**：所有锁定期选项统一为 8% 年化收益率
- **按秒计息**：奖励按实际质押秒数连续累积，精确到秒
- **奖励上限**：奖励只计算到锁定期结束，超期质押不会增加奖励

#### 3. 提取机制

**解锁规则**：
- **锁定期限制**：锁定期内（365天）不能解除质押，只能提取奖励
- **解锁条件**：锁定期结束后（365天后）才能解除质押
- **解锁时间计算**：解锁时间 = 质押时间 + 365天（例如：2026-11-01 质押，解锁时间 2027-11-01）

**提取方式**：
1. **奖励提取**（锁定期内）：
   - 可以随时提取已累积的奖励
   - 提取奖励后，质押位置仍然保留
   - 本金继续锁定，继续获得奖励

2. **解除质押**（锁定期结束后）：
   - 锁定期结束后，可以解除质押
   - 解除质押时，自动提取本金 + 全部累积奖励
   - 解除质押后，该质押位置关闭，不再获得奖励

3. **紧急提取**（特殊情况下）：
   - 仅在管理员启用紧急模式时可用
   - 可以随时提取，不受锁定期限制
   - 只能提取本金，放弃全部奖励

**提取金额**：
- **奖励提取**：仅提取已累积的奖励金额
- **解除质押**：本金 + 全部累积奖励（包括未提取的奖励）
- **紧急提取**：仅本金，不包含奖励

#### 4. 风险控制
- **最大总质押量限制**：整个产品池的上限（所有用户质押金额总和的上限），防止过度集中，确保系统稳定
- **最小质押门槛**：设置合理的参与门槛（单笔质押的最低金额）
- **紧急提取机制**：特殊情况下管理员可启用紧急模式，用户可随时提取本金（放弃奖励）

### 适用场景
✅ 适合长期持有 HSK 的用户  
✅ 希望获得稳定收益的投资者  
✅ 小额资金参与质押  
✅ 不需要高收益但追求稳健的用户  

### 运营建议
- **推广策略**：强调低门槛、稳定收益，吸引普通用户参与
- **用户教育**：重点说明锁定期和收益计算方式
- **奖励池管理**：需要定期向奖励池充值，确保有足够资金支付奖励
- **大户 DID 提醒**：质押金额达到 5万 HSK 时，提醒用户去 mint 大户 DID

---

## 三. 产品二：Premium Staking（高级质押）

### 产品定位
面向大户和机构的高级质押产品，提供高额收益，但需要较高的资金门槛和审核机制。

### 目标用户
- 大户投资者
- 机构投资者
- 高净值用户

### 核心参数

| 参数项 | 配置值 | 说明 |
|--------|--------|------|
| **最小质押门槛** | 500,000 HSK | 用户每次质押的最低金额（50万 HSK） |
| **年化收益率** | 16% | 固定年化收益率（部署时配置，链上自动计算） |
| **锁定期** | 365天 | 固定365天锁定期 |
| **白名单模式** | 启用 | 只有经过审核的用户才能参与质押 |
| **最大总质押量** | 20,000,000 HSK | 整个产品池的上限（所有用户质押金额总和的上限，非单笔限制） |

### 产品机制

#### 1. 参与机制
- **白名单审核**：用户需要先申请加入白名单，通过审核后才能参与质押
- **质押时间窗口**：只能在指定的时间窗口内进行质押（由管理员设置开始时间和结束时间）
- **高门槛设置**：最低质押金额为 50万 HSK，确保参与用户具有足够资金实力
- **固定锁定期**：锁定期固定为 365天，鼓励长期质押

#### 2. 收益机制

**收益规则**：
- **固定年化**：所有锁定期选项统一为 16% 年化收益率（链上自动计算）
- **按秒计息**：奖励按实际质押秒数连续累积，精确到秒
- **奖励上限**：奖励只计算到锁定期结束，超期质押不会增加奖励

#### 3. 提取机制

**解锁规则**：
- **锁定期限制**：锁定期内（365天）不能解除质押，只能提取奖励
- **解锁条件**：锁定期结束后（365天后）才能解除质押
- **解锁时间计算**：解锁时间 = 质押时间 + 365天（例如：2026-11-01 质押，解锁时间 2027-11-01）

**提取方式**：
1. **奖励提取**（锁定期内）：
   - 可以随时提取已累积的奖励
   - 提取奖励后，质押位置仍然保留
   - 本金继续锁定，继续获得奖励

2. **解除质押**（锁定期结束后）：
   - 锁定期结束后，可以解除质押
   - 解除质押时，自动提取本金 + 全部累积奖励
   - 解除质押后，该质押位置关闭，不再获得奖励

3. **紧急提取**（特殊情况下）：
   - 仅在管理员启用紧急模式时可用
   - 可以随时提取，不受锁定期限制
   - 只能提取本金，放弃全部奖励

**提取金额**：
- **奖励提取**：仅提取已累积的奖励金额
- **解除质押**：本金 + 全部累积奖励
- **紧急提取**：仅本金，不包含奖励

#### 4. 风险控制
- **白名单审核**：严格的用户审核机制，确保资金安全
- **高门槛限制**：通过高门槛筛选合格的投资者（单笔质押的最低金额）
- **最大总质押量限制**：整个产品池的上限（所有用户质押金额总和的上限），控制产品规模，确保系统稳定
- **紧急提取机制**：特殊情况下管理员可启用紧急模式，用户可随时提取本金（放弃奖励）

### 适用场景
✅ 适合资金量较大的用户  
✅ 追求高收益的投资者  
✅ 愿意长期锁定的用户  
✅ 通过审核的机构投资者  

### 运营建议
- **推广策略**：强调高收益（16% 年化）、高门槛，吸引优质大户和机构
- **白名单管理**：建立完善的审核流程，确保白名单用户质量
- **奖励池管理**：
  - 需要充足的奖励池资金支持（16% APY 需要更多资金）
  - 定期监控奖励池余额，确保有足够资金支付奖励
- **用户沟通**：及时与大户沟通，提供专属服务
- **大户 DID 提醒**：Premium Staking 用户均符合大户 DID 条件（最低门槛 50万 HSK），及时提醒用户去 mint 大户 DID

---

## 四. 产品对比

| 特性 | 普通 Staking | Premium Staking |
|------|-------------|-----------|
| **目标用户** | 普通用户 | 大户/机构 |
| **最小质押** | 1 HSK | 500,000 HSK |
| **年化收益** | 8% | 16% |
| **锁定期** | 365天 | 365天 |
| **参与方式** | 开放（无需审核） | 白名单（需审核） |
| **最大总质押** | 1,000万 HSK（池子上限） | 2,000万 HSK（池子上限） |
| **收益等级** | 稳健 | 高收益 |

---

## 五. 产品设计逻辑

### 为什么设计两套产品？

1. **用户分层**：不同资金量的用户有不同的需求和风险承受能力
2. **收益差异化**：通过不同收益水平吸引不同用户群体
3. **风险控制**：高收益产品需要更高的门槛和更严格的审核
4. **资金管理**：通过产品分层，更好地管理不同规模的资金

### 为什么普通 Staking 是 8%？

- **市场定位**：8% 是稳健的收益水平，适合普通用户
- **风险可控**：较低收益意味着较低的风险和资金需求
- **用户接受度**：普通用户更容易接受稳健的收益水平

### 为什么 Premium Staking 是 16%？

- **高门槛补偿**：高门槛需要相对较高的收益来吸引用户
- **长期锁定**：鼓励用户长期锁定资金
- **风险溢价**：收益覆盖更高的风险和资金成本
- **市场定位**：16% 是合理的收益水平，适合大户和机构投资者

### 为什么 Premium Staking 需要白名单？

- **资金安全**：高收益产品需要确保参与用户的质量
- **风险控制**：通过审核机制筛选合格的投资者
- **合规要求**：可能需要满足某些合规要求

---

## 六. 重要机制说明

### 1. 解锁机制

**核心规则**：
- **锁定期内**：不能解除质押，只能提取奖励
- **锁定期结束后**：可以解除质押，提取本金 + 全部奖励
- **解锁时间**：解锁时间 = 质押时间 + 锁定期

**解锁条件**：
- 必须等待锁定期完全结束
- 锁定期内无法提前解除质押
- 锁定期结束后可以随时解除质押（无时间限制）

**示例说明**：
- 用户于 2026-11-01 00:00:00 质押，固定 365 天锁定期
- 解锁时间：2027-11-01 00:00:00（365 天后）
- 锁定期内（2026-11-01 至 2027-11-01）：只能提取奖励，不能解除质押
- 锁定期结束后（2027-11-01 之后）：可以解除质押，提取本金 + 全部奖励

**运营意义**：
- 确保资金锁定，避免用户过早退出
- 保护质押机制的有效性
- 鼓励用户长期持有

### 2. 奖励计算机制

**核心规则**：奖励只计算到锁定期结束

**示例说明**：
- 用户选择 365 天锁定期，年化 8%
- 实际质押了 400 天才提取
- 奖励仍按 365 天计算：`本金 × 8% × (365/365) = 本金 × 8%`
- **重要**：超过锁定期的时间不会产生额外奖励，奖励只计算到锁定期结束

**运营意义**：
- 鼓励用户按时提取，避免资金长期占用
- 提高资金周转效率
- 确保奖励池资金充足


### 3. 白名单机制

**普通 Staking**：
- 白名单模式：关闭
- 所有用户可自由参与
- 无需审核

**Premium Staking**：
- 白名单模式：启用
- 只有白名单用户才能质押
- 需要管理员审核添加

**运营建议**：
- 建立白名单审核标准
- 定期审核白名单用户
- 及时添加/移除白名单用户

### 4. 奖励池管理

**独立奖励池**：
- 两个产品有独立的奖励池
- 需要分别管理和充值
- 不能互相挪用

**奖励池需求**：
- **普通 Staking**：按 8% APY 计算所需奖励
- **Premium Staking**：按 16% APY 计算所需奖励（需要更多资金）

**运营建议**：
- 定期检查奖励池余额
- 确保有足够资金支付固定年化奖励（16% APY）
- 提前规划奖励池充值计划

### 5. 紧急提取机制

**机制概述**：
- 紧急提取是特殊情况下的一种提取方式
- 仅在管理员启用紧急模式后可用
- 允许用户在锁定期内提取本金，但放弃全部奖励

**触发条件**：
- 管理员必须启用紧急模式
- 紧急模式启用后，用户可以随时使用紧急提取功能

**功能说明**：
- **紧急提取**：
  - 不受锁定期限制，可以随时提取
  - 只能提取本金，不包含奖励
  - 提取后质押位置关闭

- **紧急模式下的其他限制**：
  - 暂停奖励分配
  - 新质押被阻止
  - 已满足解锁条件可正常解除质押，但奖励为 0；未到期可使用紧急提取（仅本金）

**使用场景**：
- 合约出现紧急情况或安全风险
- 需要快速回收用户本金
- 系统维护或升级
- 不可预见的紧急情况

**操作流程**：
1. 管理员启用紧急模式
2. 系统通知用户紧急模式已启用
3. 用户可以选择紧急提取（提取本金，放弃奖励）
4. 紧急情况解除后，管理员可以关闭紧急模式

**运营建议**：
- ⚠️ 谨慎使用紧急模式，仅在真正紧急情况下启用
- ⚠️ 及时通知所有用户紧急模式已启用
- ⚠️ 制定详细的应急处理流程
- ⚠️ 明确告知用户紧急提取会放弃奖励
- ⚠️ 确保用户充分理解紧急提取的后果

---

## 七. 运营策略建议

### 普通 Staking 运营策略

1. **用户获取**
   - 强调低门槛（1 HSK 即可参与）
   - 突出稳定收益（8% 年化）
   - 降低参与难度（无需审核）

2. **用户留存**
   - 锁定期为 365天
   - 定期发布收益报告
   - 建立用户社群

3. **奖励池管理**
   - 定期监控奖励池余额
   - 提前规划充值计划
   - 确保奖励及时发放

### Premium Staking 运营策略

1. **用户获取**
   - 定向邀请大户和机构
   - 强调高收益（16% 年化）
   - 提供专属服务

2. **用户审核**
   - 建立审核标准
   - 验证用户资质
   - 定期审核白名单

3. **奖励池管理**
   - 高收益需要更多资金支持（16% APY）
   - 需要更严格的资金管理
   - 定期评估奖励池充足性

---

## 八. 关键指标监控

### 普通 Staking 监控指标

- **总质押量**：监控产品总质押金额
- **用户数量**：统计参与用户数
- **平均质押金额**：了解用户质押规模
- **奖励池余额**：确保有足够资金支付奖励
- **锁定期分布**：了解用户选择的锁定期偏好

### Premium Staking 监控指标

- **总质押量**：监控产品总质押金额
- **白名单用户数**：统计授权用户数量
- **平均质押金额**：了解大户质押规模
- **奖励池余额**：确保有足够资金支付奖励（需要更多）
- **锁定期分布**：了解大户选择的锁定期偏好

---

## 九. 运营注意事项

### 1. 奖励池管理
- ✅ 两个产品需要独立的奖励池
- ✅ 定期检查奖励池余额
- ✅ 提前规划充值计划
- ⚠️ 确保有足够资金支付奖励

### 2. 白名单管理
- ✅ 建立审核标准
- ✅ 定期审核白名单用户
- ✅ 及时添加/移除用户
- ⚠️ 确保审核流程透明

### 3. 用户沟通
- ✅ 及时发布产品信息
- ✅ 解答用户疑问
- ✅ 提供使用指南
- ⚠️ 保持沟通渠道畅通

### 4. 风险控制
- ✅ 监控产品总质押量
- ✅ 关注异常情况
- ✅ 制定应急预案
- ⚠️ 确保系统稳定运行


---

## 十. 产品附加功能

### 大户 DID（去中心化身份）

**功能说明**：
- 为质押金额 ≥ 5万 HSK 的用户提供专属的去中心化身份标识（DID）
- 当用户质押金额达到 5万 HSK 时，系统自动提醒用户可以去 mint 大户 DID
- 用户需要主动去 mint DID，系统只提供提醒，不自动 mint

---

## 十一. 总结

双层 Staking 产品方案通过差异化的产品设计，满足不同用户群体的需求：

- **普通 Staking**：低门槛、稳健收益，面向普通用户
- **Premium Staking**：高门槛、高收益，面向大户和机构

通过合理的机制设计，既保证了产品的安全性，又提供了灵活的用户体验，为运营提供了清晰的运营策略和监控指标。

---

## 📚 相关文档

- [主 README](../README.md)
- [合约架构说明](./CONTRACT_ARCHITECTURE.md) - **合约架构详解（开发必读）**
- [产品方案执行摘要](./PRODUCT_SUMMARY.md) - 快速了解
- [双层产品方案文档](./DUAL_TIER_STAKING.md) - 技术部署文档
- [产品开发文档](./PRODUCT_PLANS_DEV.md) - 开发团队文档
- [快速开始指南](./QUICK_START_DUAL_TIER.md) - 快速部署指南
- [技术常见问题](./TECHNICAL_FAQ.md) - 技术机制说明
- [术语表](./GLOSSARY.md) - 术语定义
- [错误处理指南](./ERROR_HANDLING.md) - 常见错误处理

---

**文档版本**: 1.0.0  
**最后更新**: 2026-11

